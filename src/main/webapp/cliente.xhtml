<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core">
<h:head>
</h:head>
<body>
<h1> Cadastro de Cliente</h1>

<h:form id="frmCliente">
		Nome:<h:inputText value="#{cllienteController.cliente.nome}"></h:inputText>
		E-mail:<h:inputText value="#{cllienteController.cliente.email}"></h:inputText>
		Nome Estado:<h:inputText value="#{cllienteController.cliente.estado.nome}"></h:inputText>
		UF:<h:inputText value="#{cllienteController.cliente.estado.uf}"></h:inputText>
		 <h:commandButton action="#{cllienteController.salvar}" value="Salvar">
			  	<f:ajax  execute="@form"  render="frmCliente"></f:ajax>
			  </h:commandButton>
			  <h:commandButton rendered="#{cllienteController.modoEdicao}" action="#{cllienteController.cancelar}" value="Cancelar">
			  	<f:ajax  render="frmCliente"></f:ajax>
			  </h:commandButton>
		
		Estado<h:selectOneMenu value="#{cllienteController.cliente.estado}" converter="#{estadoConverter}">
			  <f:selectItem itemLabel="Selecione..." itemValue="#{null}" noSelectionOption="true" />
			  <f:selectItems value="#{cllienteController.estados}" var="e" itemValue="#{e}" itemLabel="#{e.uf}" />
			  </h:selectOneMenu>

			  <h:dataTable value="#{cllienteController.clientes}" var="c" id="dtCliente">
			  		<h:column>
			  		<f:facet name="header">ID</f:facet>
			  			#{c.id}
			  		</h:column>
			  		<h:column>
			  		<f:facet name="header">Nome</f:facet>
			  			#{c.nome}
			  		</h:column>
			  		<h:column>
			  		<f:facet name="header">Email</f:facet>
			  			#{c.email}
			  		</h:column>

			  		<h:column>
			  		<f:facet name="header">Estado</f:facet>
			  			#{c.estado.nome}
			  		</h:column>
			  		<h:column>
			  		<f:facet name="header">UF</f:facet>
			  			#{c.estado.uf}
			  		</h:column>
			  		
			  		<h:column>
			  			<f:facet name="header">Ação</f:facet>
			  			<h:commandButton action="#{cllienteController.excluir(c)}" value="Excluir" onclick="return confirm('certeza?')">
			  			<f:ajax render="frmCliente"></f:ajax>
			  			</h:commandButton>
			  			<h:commandButton action="#{cllienteController.editar(c)}" value="Editar">
			  			<f:ajax  render="frmCliente"></f:ajax>
			  			</h:commandButton>
			  		</h:column>
			  </h:dataTable>
</h:form>
</body>
</html>